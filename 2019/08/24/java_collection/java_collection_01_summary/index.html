<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Java," />










<meta name="description" content="Java 集合是 Java API 用得最频繁的一类，掌握 Java 集合的原理以及继承结构非常有必要。总的来说，Java 容器可以划分为 4 个部分：  List 集合 Set 集合 Queue 集合 Map 集合  除了上面 4 种集合之外，还有一个专门的工具类：  工具类（Iterator 迭代器、Enumeration 枚举类、Arrays 和 Collections）  在开始聊具体的集">
<meta name="keywords" content="Java">
<meta property="og:type" content="article">
<meta property="og:title" content="集合系列（一）：集合框架概述">
<meta property="og:url" content="http://yoursite.com/2019/08/24/java_collection/java_collection_01_summary/index.html">
<meta property="og:site_name" content="陈树义">
<meta property="og:description" content="Java 集合是 Java API 用得最频繁的一类，掌握 Java 集合的原理以及继承结构非常有必要。总的来说，Java 容器可以划分为 4 个部分：  List 集合 Set 集合 Queue 集合 Map 集合  除了上面 4 种集合之外，还有一个专门的工具类：  工具类（Iterator 迭代器、Enumeration 枚举类、Arrays 和 Collections）  在开始聊具体的集">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234825821-1006038125.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234826161-1891867586.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234826334-651785433.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234827434-703183363.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234827766-383757492.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234830261-1908505236.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234830582-1688235594.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234830746-988653495.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234830914-1418819329.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234831117-1004947247.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234831282-2009170779.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234832560-1707044445.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234832937-298864807.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234833123-826572886.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234834013-1579308722.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234834940-577029236.jpg">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234835483-2007183639.jpg">
<meta property="og:updated_time" content="2019-08-25T02:06:31.004Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="集合系列（一）：集合框架概述">
<meta name="twitter:description" content="Java 集合是 Java API 用得最频繁的一类，掌握 Java 集合的原理以及继承结构非常有必要。总的来说，Java 容器可以划分为 4 个部分：  List 集合 Set 集合 Queue 集合 Map 集合  除了上面 4 种集合之外，还有一个专门的工具类：  工具类（Iterator 迭代器、Enumeration 枚举类、Arrays 和 Collections）  在开始聊具体的集">
<meta name="twitter:image" content="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234825821-1006038125.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/08/24/java_collection/java_collection_01_summary/"/>





  <title>集合系列（一）：集合框架概述 | 陈树义</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-113382792-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9d1e126f4ddcdf87de1bb8dd68964127";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">陈树义</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">偶尔写写文章的宅男</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/24/java_collection/java_collection_01_summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="陈树义">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="陈树义">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">集合系列（一）：集合框架概述</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-24T09:01:00+08:00">
                2019-08-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java集合/" itemprop="url" rel="index">
                    <span itemprop="name">Java集合</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/08/24/java_collection/java_collection_01_summary/" class="leancloud_visitors" data-flag-title="集合系列（一）：集合框架概述">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Java 集合是 Java API 用得最频繁的一类，掌握 Java 集合的原理以及继承结构非常有必要。总的来说，Java 容器可以划分为 4 个部分：</p>
<ul>
<li>List 集合</li>
<li>Set 集合</li>
<li>Queue 集合</li>
<li>Map 集合</li>
</ul>
<p>除了上面 4 种集合之外，还有一个专门的工具类：</p>
<ul>
<li>工具类（Iterator 迭代器、Enumeration 枚举类、Arrays 和 Collections）</li>
</ul>
<p>在开始聊具体的集合体系之前，我想先介绍一下 Collection 框架的基本类结构。因为无论是 List 集合、Set 集合还是 Map 集合都以这个为基础。</p>
<ul>
<li>首先，最顶层的是 Collection 接口。</li>
</ul>
<p>可以看到 Collection 接口定义了最最基本的集合操作，例如：判断集合大小、判断集合是否为空等。List、Set、Queue 都继承了该接口。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234825821-1006038125.jpg" alt=""></p>
<ul>
<li>接着，AbstractCollection 也继承了 Collection 接口。</li>
</ul>
<p>从这个类名可以看出，其是一个抽象类。AbstractCollection 对 Collection 接口中一些通用的方法做了实现。例如：判断是否为空的方法、判断是否包含某个元素的方法等。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234826161-1891867586.jpg" alt=""></p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234826334-651785433.jpg" alt=""></p>
<p>通过继承 AbstractCollection 接口，可以少写许多不必要的代码，这是代码抽象设计最常用的思想。AbstractCollection 是最为基础的类，其他所有集合的实现都继承了这个抽象类。</p>
<h2 id="List-集合"><a href="#List-集合" class="headerlink" title="List 集合"></a>List 集合</h2><p>List 集合存储的是有序的数据集合，其数据结构特点是：读取快，修改慢，适合于读取多、写入修改少的场景。List 集合的类继承结构如下：</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234827434-703183363.jpg" alt=""></p>
<p>我们可以看到除了 Collection 和 AbstractCollection 之外，我们还有 List 接口和 AbstractList 抽象类。其中 List 接口是 List 集合的最上层抽象，其继承了 Collection 接口，表示其实一个集合。而 AbstractList 则是 List 集合的抽象实现，实现了许多公用的操作。</p>
<p>整个 List 集合的实现可以分为红、黄、绿三大块。其中红色部分是 List 集合的列表实现，绿色部分是 List 结合的链表实现，而 黄色部分则是 List 集合列表实现的线程安全版本。</p>
<h3 id="列表实现"><a href="#列表实现" class="headerlink" title="列表实现"></a>列表实现</h3><p>ArrayList 类是很常用的 List 实现，其底层是用数组实现的。其读取元素的时间复杂度是 O（1），修改写入元素的时间复杂度是 O（N）。我们将会在下面的章节中详细介绍，这里不做深入。</p>
<h3 id="列表安全实现"><a href="#列表安全实现" class="headerlink" title="列表安全实现"></a>列表安全实现</h3><p>Vector 类也是很常用的 List 实现，其数据结构与 ArrayList 非常类似。但其与 ArrayList 的一个最大的不同是：Vector 是线程安全的，而 ArrayList 则不是线程安全的。</p>
<p>Stack 类则是在 Vector 的基础上，又实现了一个双向队列。所以其除了是线程安全的之外，其还是一个先进后出的 List 实现。</p>
<p>最后我们总结一下，List 集合最为关键的几个实现类是：</p>
<ul>
<li>ArrayList：列表集合经典实现。</li>
<li>Vector：列表集合经典实现，线程安全，与 ArrayList 对应。</li>
<li>Stack：栈结构的经典实现，先进后出的数据结构。继承了 Vector，线程安全。</li>
<li>LinkedList：链表结构的经典实现。</li>
</ul>
<h3 id="链表实现"><a href="#链表实现" class="headerlink" title="链表实现"></a>链表实现</h3><p>LinkedList 是一个经典的链表实现。LinkedList 继承了 AbstractSequentialList 抽象类。AbstractSequentialList 抽象类从字面上理解是抽象连续列表。这里的重点是<br>sequential 这个词，表示其数据结构是连续的（链表）。从其源码注释也可以看出这个意思。</p>
<blockquote>
<p>This class provides a skeletal implementation of the <tt>List</tt> interface to minimize the effort required to implement this interface backed by a “sequential access” data store (such as a linked list).<br>（意译）如果你想要实现一个连续存储（链表）的 List，那么这个抽象类可以让你减少不少工足量。</p>
</blockquote>
<p>其实从命名就可以看出，AbstractSequentialList 其实是连续列表（链表）的一个抽象实现。AbstractSequentialList 抽象类做了许多工作，使得后续的链表实现更加简单。从 AbstractSequentialList 的注释可以看到，如果要实现一个链表，那么只需要实现 listIterator 方法和 size 方法就可以了。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234827766-383757492.jpg" alt=""></p>
<h2 id="Set-集合"><a href="#Set-集合" class="headerlink" title="Set 集合"></a>Set 集合</h2><p>Set 集合中存储的元素是不重复的，但是其存储顺序是无序的。下面是 Set 集合的类继承结构图：</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234830261-1908505236.jpg" alt=""></p>
<p>与 List 集合类似，都是一个 Set 接口继承了 Collection 接口。一个 AbstractSet 抽象类实现了 Set 接口、继承了 AbstractCollection 抽象类。这部分完全和 List 相同。</p>
<p>Set 集合的实现可以分为两大块，一块是 Set 集合的有序实现（红色部分），另一块是 Set 集合的哈希实现（黄色部分）。</p>
<h3 id="有序实现（TreeSet）"><a href="#有序实现（TreeSet）" class="headerlink" title="有序实现（TreeSet）"></a>有序实现（TreeSet）</h3><ul>
<li>SortedSet 接口继承了 Set 接口，TreeSet 实现了 SortedSet。</li>
</ul>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234830582-1688235594.jpg" alt=""></p>
<p>我们知道 Set 集合中的元素是无序的，而 SortedSet 接口则是定义了有序 Set 集合的接口。而 TreeSet 则是 SortedSet 的具体实现。</p>
<h3 id="哈希实现（HashSet、LinkedHashSet）"><a href="#哈希实现（HashSet、LinkedHashSet）" class="headerlink" title="哈希实现（HashSet、LinkedHashSet）"></a>哈希实现（HashSet、LinkedHashSet）</h3><p>HashSet 是 Set 接口的经典哈希实现。但 Set 集合中的元素是无序的，为了维护 Set 集合的插入顺序，人们创造出了 LinkedHashSet。LinkedHashSet 在 HashSet 的基础上是用链表维护元素的插入顺序。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234830746-988653495.jpg" alt=""></p>
<p>到这里我们总结一下 Set 集合的所有实现：</p>
<ul>
<li>TreeSet：Set 集合的有序实现。</li>
<li>HashSet：Set 集合的哈希实现。</li>
<li>LinkedHashSet：Set 集合的哈希实现，维护了元素插入顺序。</li>
</ul>
<h2 id="Queue-集合"><a href="#Queue-集合" class="headerlink" title="Queue 集合"></a>Queue 集合</h2><p>队列是一个特殊的线性表，其数据结构特点是先进先出。Queue 类结构体系如下图所示：</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234830914-1418819329.jpg" alt=""></p>
<p>首先，Queue 接口继承了 Collection 接口。Queue 接口在拥有基本集合操作的基础上，定义了队列这种数据结构的基本操作。可以看到 offer、poll 等方法都是队列独有的操作。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234831117-1004947247.jpg" alt=""></p>
<p>接着，AbstractQueue 是对 Queue 接口的抽象实现。针对队列这种数据结构，其添加、删除元素的动作都不一样。在 AbstractQueue 抽象类里将队列的基本操作都实现了一遍。例如 AbstractQueue 中的 add 方法就和 AbstractList 中的 add 方法有着不同的实现。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234831282-2009170779.jpg" alt=""></p>
<p>如上图所示，Queue 的类结构整体可以分为黄色、红色两个部分。红色部分是 Queue 接口的有序实现，有 PriorityQueue 这个实现类。黄色部分是 Deque（双向队列）的实现，有 LinkedList 和 ArrayDeque 两个实现类。</p>
<h3 id="有序实现"><a href="#有序实现" class="headerlink" title="有序实现"></a>有序实现</h3><p>PriorityQueue 是 AbstractQueue 抽象类的具体实现。</p>
<p>PriorityQueue 表示优先级队列，其按照队列元素的大小进行重新排序。当调用 peek() 或 pool() 方法取出队列中头部的元素时，并不是取出最先进入队列的元素，而是取出队列的最小元素。</p>
<h3 id="双向实现"><a href="#双向实现" class="headerlink" title="双向实现"></a>双向实现</h3><ul>
<li>首先，我们会看到 Deque 接口。</li>
</ul>
<p>Deque（double ended queue）是双向队列的意思，它能在头部或尾部进行元素操作。</p>
<ul>
<li>最后，我们看到 LinkedList 和 ArrayDeque 都是 Deque 接口的具体实现。</li>
</ul>
<p>LinkedList 我们之前说过了，是一个链表，但它还是一个双向队列。因此 LinkedList 具有 List 和 Queue 的双重特性。ArrayDeque 则是一个双向循环队列，其底层是用数组实现。更多内容，我们将在队列章节讲解。</p>
<p>最后我们总结 Queue 体系的几个常见实现类：</p>
<ul>
<li>PriorityQueue：优先级队列</li>
<li>LinkedList：双向队列实现</li>
<li>ArrayDeque：双向循环队列实现</li>
</ul>
<h2 id="Map-集合"><a href="#Map-集合" class="headerlink" title="Map 集合"></a>Map 集合</h2><p>Map 集合与 List、Set、Queue 有较大不同，其实类似于 key/value 的数据结构。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234832560-1707044445.jpg" alt=""></p>
<ul>
<li>首先，Map 接口是最顶层的接口。</li>
</ul>
<p>与 List、Set、Queue 类似，Map 接口定义的是哈希表数据结构的操作。例如我们常用的 put、get、keySet 等。</p>
<ul>
<li>接着，有 AbstractMap 抽象类。</li>
</ul>
<p>和 List 等类似，AbstractMap 是 Map 接口的抽象实现。如上图所示，Map 集合的整个类结构可以分为红、黄、绿三块。</p>
<h3 id="哈希实现"><a href="#哈希实现" class="headerlink" title="哈希实现"></a>哈希实现</h3><p>红色部分可以看成是 Map 的哈希实现。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234832937-298864807.jpg" alt=""></p>
<ul>
<li>AbstractMap 有具体的实现类 HashMap。</li>
</ul>
<p>HashMap 是 AbstractMap 基于哈希算法的具体实现。</p>
<ul>
<li>接着，LinkedHashMap 和 WeakedHashMap 继承了 HashMap。</li>
</ul>
<p>LinkedHashMap 是 HashMap 的进一步实现，其用链表保存了插入 HashMap 中的元素顺序。WeakedHashMap 是 HashMap 的进一步实现，与 HashMap不同的是：WeakedHashMap 中的引用是弱引用，如果太久没用，则会被自动回收。</p>
<h3 id="有序实现-1"><a href="#有序实现-1" class="headerlink" title="有序实现"></a>有序实现</h3><p>黄色部分可以看成是 Map 集合的有序实现。</p>
<ul>
<li>首先，SortedMap 接口继承了 Map 接口。</li>
</ul>
<p>与 Set 一样，Map 中的元素是没有顺序的，SortedMap 就是有序 Map 的接口定义。</p>
<ul>
<li>接着，NavigableMap 继承了 SortedMap 接口。</li>
</ul>
<p>NavigableMap 接口定义了一些查找逻辑，方便后续实现。</p>
<ul>
<li>最后，TreeMap 则是 NavigableMap 接口的具体实现。</li>
</ul>
<p>其实 TreeMap 是基于红黑树的 Map 实现。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234833123-826572886.jpg" alt=""></p>
<p>看到了这里，Map 整个类结构看完了一半。而另外一半则是以 Dictionary 为主的实现（绿色部分）。但实际上 Dictionary 是老旧的 Map 实现，现在已经废弃了。我们从源码的注释中可以看到相关的提示。</p>
<blockquote>
<p>NOTE: This class is obsolete（废弃的）.  New implementations should implement the Map interface, rather than extending this class.<br>这个类已经被废弃，新的实现应该实现 Map 接口，而不是扩展这个类。</p>
</blockquote>
<p>所以针对于 Dictionary 的实现，我们并不打算深入讲解。</p>
<p>到这里我们总结一下 Map 集合的所有实现类：</p>
<ul>
<li>HashMap：Map 集合的经典哈希实现。</li>
<li>LinkedHashMap：在 HashMap 的基础上，增加了对插入元素的链表维护。</li>
<li>WeakedHashMap：在 HashMap 的基础上，使强引用变为弱引用。</li>
<li>TreeMap：Map 集合的有序实现。</li>
</ul>
<h2 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h2><p>集合的工具类有：Iterator 迭代器、ListIterator 迭代器、Enumeration 枚举类、Arrays 和 Collections 类。</p>
<h3 id="Iterator-迭代器"><a href="#Iterator-迭代器" class="headerlink" title="Iterator 迭代器"></a>Iterator 迭代器</h3><p>Iterator 迭代器是一个用来遍历并选择序列中的对象。Java 的 Iterator 只能单向移动。可以看到在 ArrayList、WeakHashMap 等集合类都实现了该接口，从而实现不同类型集合的遍历。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234834013-1579308722.jpg" alt=""></p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234834940-577029236.jpg" alt=""></p>
<h3 id="ListIterator-迭代器"><a href="#ListIterator-迭代器" class="headerlink" title="ListIterator 迭代器"></a>ListIterator 迭代器</h3><p>ListIterator 继承了 Iterator 接口，所以其有更强大的功能，即它能够实现双向移动。但从其名字也可以看出，其只能适用于 List 集合的遍历。</p>
<h3 id="Enumeration-枚举类"><a href="#Enumeration-枚举类" class="headerlink" title="Enumeration 枚举类"></a>Enumeration 枚举类</h3><p>它是 JDK 1.0引入的接口。作用和Iterator一样，也是遍历集合。但是Enumeration的功能要比Iterator少。Enumeration只能在Hashtable, Vector, Stack中使用。这种传统接口已被迭代器取代，虽然 Enumeration 还未被遗弃，但在代码中已经被很少使用了。</p>
<p>官方也在文档中推荐使用 Iterator 接口来替代 Enumeration 接口。</p>
<p><img src="https://img2018.cnblogs.com/blog/595137/201908/595137-20190823234835483-2007183639.jpg" alt=""></p>
<h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3><p>Java.util.Arrays类能方便地操作数组，它提供的所有方法都是静态的。</p>
<h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><p>java.util.Collections 是一个包含各种有关集合操作的静态多态方法的工具类，服务于 Java 的 Collection 框架。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>我们花费了大量的篇幅讲解了 List 集合、Set 集合、Map 集合、Queue 集合以及 Iterator 等工具类。我们对这集合的类结构进行了详细的解析，从而更加了解他们之间的关系。</p>
<p>有时候我们会想，了解这么多有啥用呢。我有个朋友只用了常见的 ArrayList、HashMap 就可以了啊。对于这个问题，我想分享几个收获。</p>
<p><strong>第一，让你更加熟悉类之间的差异。</strong> 如果我们只会用一两个类，那么我们就不知道在什么时候用什么类。例如：什么时候用 HashMap，什么时候用 Hashtable？Iterator 接口有什么作用？JDK源码的命名有什么特点？</p>
<p><strong>第二，方便对源码进行扩展。</strong> 当我们深入研究了集合的实现之后，我们知道了原来 List 接口就是 List 这种数据类型的定义，而 AbstractList 是 List 的抽象实现。那么如果我们要实现一个自定义的 List 结构，那么我们就可以直接继承 AbstractList 类，从而达到快速实现的目的。但如果你没有深入研究呢？你或许只能从头写起，这样得浪费多大的精力啊。你学会了这种方式，那么对于你扩展 Spring 源码也是有很好的帮助的。</p>
<p>在接下来的文章里，我们将深入介绍每一个集合的具体实现。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java/" rel="tag"># Java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/08/22/java_collection/java_collection_00_startup/" rel="next" title="集合系列开篇：为什么要学集合？">
                <i class="fa fa-chevron-left"></i> 集合系列开篇：为什么要学集合？
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/08/24/java_collection/java_collection_02_array_list/" rel="prev" title="集合系列 List（二）：ArrayList">
                集合系列 List（二）：ArrayList <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">陈树义</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">112</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">30</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/chenyurong" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:shuyi.chen.china@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/chen-shu-yi-21/activities" target="_blank" title="ZhiHu">
                      
                        <i class="fa fa-fw fa-book"></i>ZhiHu</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://dancefirstthinklater.github.io/" title="Java源码爱好者-草草集" target="_blank">Java源码爱好者-草草集</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://jm.taobao.org/" title="阿里巴巴中间件团队博客" target="_blank">阿里巴巴中间件团队博客</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#List-集合"><span class="nav-number">1.</span> <span class="nav-text">List 集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#列表实现"><span class="nav-number">1.1.</span> <span class="nav-text">列表实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列表安全实现"><span class="nav-number">1.2.</span> <span class="nav-text">列表安全实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#链表实现"><span class="nav-number">1.3.</span> <span class="nav-text">链表实现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set-集合"><span class="nav-number">2.</span> <span class="nav-text">Set 集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#有序实现（TreeSet）"><span class="nav-number">2.1.</span> <span class="nav-text">有序实现（TreeSet）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#哈希实现（HashSet、LinkedHashSet）"><span class="nav-number">2.2.</span> <span class="nav-text">哈希实现（HashSet、LinkedHashSet）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Queue-集合"><span class="nav-number">3.</span> <span class="nav-text">Queue 集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#有序实现"><span class="nav-number">3.1.</span> <span class="nav-text">有序实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#双向实现"><span class="nav-number">3.2.</span> <span class="nav-text">双向实现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Map-集合"><span class="nav-number">4.</span> <span class="nav-text">Map 集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#哈希实现"><span class="nav-number">4.1.</span> <span class="nav-text">哈希实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有序实现-1"><span class="nav-number">4.2.</span> <span class="nav-text">有序实现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#工具类"><span class="nav-number">5.</span> <span class="nav-text">工具类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Iterator-迭代器"><span class="nav-number">5.1.</span> <span class="nav-text">Iterator 迭代器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ListIterator-迭代器"><span class="nav-number">5.2.</span> <span class="nav-text">ListIterator 迭代器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Enumeration-枚举类"><span class="nav-number">5.3.</span> <span class="nav-text">Enumeration 枚举类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Arrays"><span class="nav-number">5.4.</span> <span class="nav-text">Arrays</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Collections"><span class="nav-number">5.5.</span> <span class="nav-text">Collections</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">6.</span> <span class="nav-text">总结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈树义</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("ytt7fLFQUG3Iaddbl8u37qR4-gzGzoHsz", "CgXunVBQDWaT1EHkxf8FR0QP");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
